# è·¨æµè§ˆå™¨æ‰©å±• - React + Vite

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ **React 18 + TypeScript + Vite + Antd** æ„å»ºçš„ **è·¨æµè§ˆå™¨æ‰©å±•æ’ä»¶** é¡¹ç›®æ¨¡æ¿ï¼ŒåŒæ—¶æ”¯æŒ **Chrome (Manifest V3)** å’Œ **Firefox (Manifest V2)**ï¼ŒåŒ…å« Popupã€Optionsã€Backgroundã€Content Scriptã€Side Panelã€DevTools é¢æ¿ç­‰åŠŸèƒ½æ¨¡å—ã€‚

## ğŸ“¦ ç‰¹æ€§

- ğŸŒŸ æ”¯æŒ Chrome MV3 å’Œ Firefox MV2 æ¶æ„
- ğŸ¦Š è·¨æµè§ˆå™¨å…¼å®¹ï¼Œä¸€å¥—ä»£ç æ”¯æŒå¤šä¸ªæµè§ˆå™¨
- âš¡ ä½¿ç”¨ Vite æ„å»ºï¼Œæé€Ÿå¼€å‘
- ğŸ’¡ ä½¿ç”¨ React + TypeScript ç¼–å†™å„é¡µé¢
- ğŸ“œ æ”¯æŒå›½é™…åŒ–ï¼ˆ_localesï¼‰
- ğŸ“ é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œæ¨¡å—èŒè´£æ˜ç¡®
- ğŸ› ï¸ æ”¯æŒ SidePanelã€DevTools é¢æ¿å¼€å‘ï¼ˆChromeï¼‰
- ğŸ”’ ä½¿ç”¨ `.env` ç®¡ç†å¤šç¯å¢ƒé…ç½®
- âœ… å†…ç½® ESLint + TypeScript æ ¡éªŒ
- ğŸ”§ è‡ªåŠ¨æµè§ˆå™¨æ£€æµ‹å’ŒAPIå…¼å®¹

## ğŸ“ é¡¹ç›®ç»“æ„

è¯¦è§é¡¹ç›®æ–‡æ¡£ï¼š[æ–‡ä»¶ç»“æ„è¯´æ˜](##ğŸ“-é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜react--vite--chrome-mv3)

## ğŸ§ª æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# Chromeå¼€å‘
pnpm dev

# Firefoxå¼€å‘  
pnpm dev:firefox

# æ„å»ºChromeç‰ˆæœ¬
pnpm build

# æ„å»ºFirefoxç‰ˆæœ¬
pnpm build:firefox

# æ„å»ºæ‰€æœ‰ç‰ˆæœ¬
pnpm build:all
```

## ğŸ§© åŠ è½½æ’ä»¶

### Chrome
1. æ‰“å¼€ `chrome://extensions/`
2. å¼€å¯å³ä¸Šè§’ã€Œå¼€å‘è€…æ¨¡å¼ã€
3. ç‚¹å‡»ã€ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºã€ï¼Œé€‰æ‹© `dist/` æ–‡ä»¶å¤¹

### Firefox
1. æ‰“å¼€ `about:debugging`
2. ç‚¹å‡»ã€Œæ­¤Firefoxã€
3. ç‚¹å‡»ã€Œä¸´æ—¶è½½å…¥é™„åŠ ç»„ä»¶ã€
4. é€‰æ‹© `dist-firefox/` ç›®å½•ä¸­çš„ `manifest.json` æ–‡ä»¶

## ğŸ¦Š æµè§ˆå™¨å…¼å®¹æ€§

| åŠŸèƒ½ | Chrome | Firefox | è¯´æ˜ |
|------|--------|---------|------|
| Popup | âœ… | âœ… | å¼¹å‡ºçª—å£ |
| Options | âœ… | âœ… | é€‰é¡¹é¡µé¢ |
| Background | âœ… | âœ… | èƒŒæ™¯è„šæœ¬ |
| Content Script | âœ… | âœ… | å†…å®¹è„šæœ¬ |
| Side Panel | âœ… | âŒ | Chromeä¸“æœ‰åŠŸèƒ½ |
| DevTools | âœ… | âœ… | å¼€å‘è€…å·¥å…· |
| Storage API | âœ… | âœ… | å­˜å‚¨API |
| Tabs API | âœ… | âœ… | æ ‡ç­¾é¡µAPI |

è¯¦ç»†æ„å»ºè¯´æ˜è¯·æŸ¥çœ‹ [BUILD_GUIDE.md](./BUILD_GUIDE.md)

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜ï¼ˆReact + Vite + Chrome MV3ï¼‰

```text
CHROME-MV3-EXTENSION-REACT/
â”œâ”€â”€ _locales/
â”œâ”€â”€ dist/
â”œâ”€â”€ node_modules/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ background/
â”‚   â”œâ”€â”€ component/
â”‚   â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ devtools/
â”‚   â”œâ”€â”€ helpers/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ img/
â”‚   â”œâ”€â”€ options/
â”‚   â”œâ”€â”€ page/
â”‚   â”œâ”€â”€ popup/
â”‚   â”œâ”€â”€ sidePanel/
â”‚   â”œâ”€â”€ stroe/
â”‚   â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ constants.ts
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ .env.development
â”œâ”€â”€ .env.production
â”œâ”€â”€ .eslintrc.cjs
â”œâ”€â”€ .gitignore
â”œâ”€â”€ manifest.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â””â”€â”€ vite.config.ts
```

### ğŸ“ é¡¶å±‚ç›®å½•

| ç›®å½•åç§°         | è¯´æ˜                                                                 |
|------------------|----------------------------------------------------------------------|
| `_locales/`      | å›½é™…åŒ–è¯­è¨€åŒ…ç›®å½•ï¼ŒChrome æ’ä»¶æ”¯æŒå¤šè¯­è¨€å±•ç¤ºï¼ˆå¦‚ `en/messages.json`ï¼‰ã€‚ |
| `dist/`          | Vite æ„å»ºåçš„è¾“å‡ºç›®å½•ï¼Œæ‰“åŒ…ç”Ÿæˆçš„æ’ä»¶æ–‡ä»¶å°†å­˜æ”¾äºæ­¤ã€‚                    |
| `node_modules/`  | é¡¹ç›®çš„ä¾èµ–æ¨¡å—ï¼Œç”± `npm` æˆ– `pnpm` å®‰è£…ç”Ÿæˆã€‚                           |


### ğŸ“ src/ ç›®å½•

| å­ç›®å½• / æ–‡ä»¶        | è¯´æ˜                                                                 |
|----------------------|----------------------------------------------------------------------|
| `assets/`            | å­˜æ”¾é™æ€èµ„æºï¼ˆå›¾æ ‡ã€æ ·å¼ç­‰ï¼‰ã€‚                                        |
| `background/`        | MV3 çš„ Background Service Worker è„šæœ¬ï¼ˆäº‹ä»¶ç›‘å¬ã€æ¶ˆæ¯å¤„ç†ã€åˆå§‹åŒ–é€»è¾‘ç­‰ï¼‰ã€‚|
| `component/`         | é€šç”¨çš„ React UI ç»„ä»¶å°è£…ã€‚                                             |
| `content/`           | Content Scriptsï¼Œæ³¨å…¥ç½‘é¡µæ‰§è¡Œçš„è„šæœ¬ã€‚                                 |
| `devtools/`          | æ’ä»¶è‡ªå®šä¹‰ DevTools é¢æ¿çš„é€»è¾‘ã€‚                                       |
| `helpers/`           | å·¥å…·å‡½æ•°ã€é€šç”¨é€»è¾‘æ¨¡å—ã€‚                                               |
| `hooks/`             | è‡ªå®šä¹‰ React Hooksã€‚                                                  |
| `img/`               | æ’ä»¶ä½¿ç”¨çš„å›¾åƒèµ„æºï¼ˆéæ„å»ºä¾èµ–å›¾ï¼‰ã€‚                                   |
| `options/`           | æ’ä»¶â€œé€‰é¡¹é¡µâ€é€»è¾‘ï¼ŒMV3 manifest ä¸­å®šä¹‰çš„ options é¡µé¢ã€‚                |
| `page/`              | é¡µé¢è§†å›¾æ–‡ä»¶ï¼Œä¾‹å¦‚ç”¨äºå±•ç¤ºåœ¨ options æˆ– popup ä¸­çš„ React é¡µé¢ã€‚       |
| `popup/`             | å¼¹å‡ºé¡µï¼ˆPopupï¼‰è„šæœ¬å’Œè§†å›¾ã€‚                                           |
| `sidePanel/`         | Chrome MV3 æ–°ç‰¹æ€§ Side Panel é¡µé¢åŠå…¶é€»è¾‘ã€‚                           |
| `store/`             | ç”¨äºå­˜æ”¾çŠ¶æ€ç®¡ç†ç›¸å…³é€»è¾‘ï¼ˆå¦‚ Redux/Pinia/Zustand ç­‰ï¼‰ã€‚|
| `types/`             | TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶å¤¹ã€‚                                            |
| `constants.ts`       | å…¨å±€å¸¸é‡å®šä¹‰ã€‚                                                        |
| `vite-env.d.ts`      | Vite æä¾›çš„ç±»å‹ç¯å¢ƒå£°æ˜æ–‡ä»¶ã€‚                                         |

### âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜
| æ–‡ä»¶å                 | è¯´æ˜                                                                 |
|------------------------|----------------------------------------------------------------------|
| `.env.development`     | å¼€å‘ç¯å¢ƒç¯å¢ƒå˜é‡ã€‚                                                    |
| `.env.production`      | ç”Ÿäº§ç¯å¢ƒç¯å¢ƒå˜é‡ã€‚                                                    |
| `.eslintrc.cjs`        | ESLint é…ç½®ï¼Œæ§åˆ¶ä»£ç é£æ ¼å’Œé™æ€æ£€æŸ¥è§„åˆ™ã€‚                             |
| `.gitignore`           | Git å¿½ç•¥æ–‡ä»¶é…ç½®ã€‚                                                     |
| `manifest.json`        | Chrome æ’ä»¶æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰æƒé™ã€å…¥å£ã€èƒŒæ™¯é¡µã€content script ç­‰ã€‚ |
| `package.json`         | é¡¹ç›®ä¾èµ–ç®¡ç†åŠæ„å»ºè„šæœ¬é…ç½®ã€‚                                           |
| `package-lock.json`    | ä¾èµ–é”å®šæ–‡ä»¶ï¼ˆnpmï¼‰ã€‚                                                  |
| `pnpm-lock.yaml`       | ä¾èµ–é”å®šæ–‡ä»¶ï¼ˆpnpmï¼‰ã€‚                                                 |
| `README.md`            | é¡¹ç›®è¯´æ˜æ–‡æ¡£ã€‚                                                         |
| `tsconfig.json`        | TypeScript åŸºç¡€é…ç½®ã€‚                                                  |
| `tsconfig.app.json`    | App çš„ TS é…ç½®ï¼ˆå¯ç”¨äºç»†åˆ†æ„å»ºç›®æ ‡ï¼‰ã€‚                                 |
| `tsconfig.node.json`   | Node ç¯å¢ƒä¸‹çš„ TS é…ç½®ï¼ˆå¦‚ `vite.config.ts` æ‰€ç”¨ï¼‰ã€‚                   |
| `vite.config.ts`       | Vite æ„å»ºé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ’ä»¶æ‰“åŒ…é€»è¾‘ã€æ¨¡å—è·¯å¾„åˆ«åç­‰è®¾ç½®ã€‚              |
